{% extends "base.html" %}
{% block content %}

<!-- ===== Keep the same bright nav theme as dashboard ===== -->
<style>
  nav {
    background: linear-gradient(to right, #ffffff, #f8fafc) !important;
    box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
  }

  nav .nav-container a {
    color: #1e293b !important;
    font-weight: 600;
  }

  nav .nav-container a:hover {
    color: #2563eb !important;
  }

  nav .brand {
    background: linear-gradient(to right, #2563eb, #06b6d4);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
</style>

<!-- ===== Background Video (unchanged) ===== -->
<video autoplay muted loop playsinline id="bg-video"
  class="fixed top-0 left-0 w-full h-full object-cover z-0 opacity-55">
  <source src="{{ url_for('static', filename='videos/skilllink_bg.mp4') }}" type="video/mp4">
</video>

<!-- ===== Workers Page Container ===== -->
<div class="relative z-10 min-h-screen px-6 py-24 flex flex-col items-center">

  <!-- Header -->
  <div class="text-center mb-12">
    <h2 class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 via-cyan-400 to-blue-500">
      Available Workers
    </h2>
    <p class="text-gray-100 mt-2">Find and hire skilled professionals with ease.</p>
  </div>

  {% if workers %}
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 w-full max-w-6xl">

      {% for w in workers %}
        <div class="p-6 rounded-2xl bg-white/95 shadow-xl border border-gray-200 text-gray-800 hover:scale-[1.02] hover:shadow-2xl transition-transform duration-300">

          <h3 class="text-xl font-semibold mb-1 text-indigo-700">{{ w.name }}</h3>
          <p class="text-sm text-gray-700 mb-3"><b>Skills:</b> {{ w.skills or "Not Provided" }}</p>

          {% set hired = false %}
          {% for h in hires %}
              {% if h.worker_id == w.id %}
                  {% set hired = true %}
              {% endif %}
          {% endfor %}

          {% if hired %}
              <button class="w-full py-2 mt-2 rounded-lg font-semibold bg-gray-300 text-gray-700 cursor-not-allowed">
                  Already Hired ‚úÖ
              </button>
          {% else %}
              <a href="{{ url_for('hire_select_job', worker_id=w.id) }}"
                 onclick="return hireClicked(this);"
                 class="block w-full mt-2 px-4 py-2 rounded-lg text-center text-white font-semibold bg-gradient-to-r from-green-500 to-emerald-400 hover:opacity-90 transition">
                 ü§ù Hire Worker
              </a>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-gray-200 text-center mt-10 text-lg">No workers found.</p>
  {% endif %}
</div>

<!-- ===== GSAP Animation ===== -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  gsap.from(".grid > div", {
    duration: 1.1,
    y: 60,
    opacity: 0,
    ease: "power3.out",
    stagger: 0.15
  });
});

function hireClicked(btn) {
    btn.innerText = "Hiring...";
    btn.style.opacity = "0.6";
    btn.style.pointerEvents = "none";
    alert("‚úÖ Hire request sent successfully!");
    return true;
}
</script>

{% endblock %}
